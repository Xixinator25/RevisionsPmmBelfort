<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Révision PMM - Complète & G2</title>
    <style>
        :root {
            --navy-blue: #0f1e3d;
            --gold: #c5a059;
            --white: #ffffff;
            --light-grey: #eef2f5;
            --red: #b30000;
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--light-grey); color: #333; }

        header {
            background: linear-gradient(135deg, var(--navy-blue), #162c5b);
            color: var(--white);
            padding: 20px;
            text-align: center;
            border-bottom: 4px solid var(--gold);
        }

        nav {
            display: flex;
            justify-content: center;
            background: #12244a;
            flex-wrap: wrap;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav button {
            background: none;
            border: none;
            color: #ccc;
            padding: 15px 15px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            transition: 0.3s;
            border-bottom: 3px solid transparent;
        }

        nav button:hover, nav button.active {
            color: var(--white);
            background: rgba(255,255,255,0.05);
            border-bottom: 3px solid var(--gold);
        }

        main {
            max-width: 900px;
            margin: 20px auto;
            background: var(--white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            min-height: 60vh;
        }

        .section-content { display: none; }
        .section-content.active { display: block; }

        h2 { color: var(--navy-blue); border-left: 5px solid var(--red); padding-left: 15px; margin-top: 0; }
        h3 { color: #555; border-bottom: 1px solid #eee; padding-bottom: 10px; margin-top: 30px; }

        /* QUIZ STYLES */
        .question-card { background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #e9ecef; margin-bottom: 20px; }
        .question-text { font-size: 1.2rem; font-weight: bold; margin-bottom: 15px; color: var(--navy-blue); text-align: center; }
        
        .quiz-image {
            max-width: 100%;
            height: auto;
            max-height: 250px;
            display: block;
            margin: 0 auto 20px auto;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: #eee;
            object-fit: contain;
        }
        
        .flag-quiz-img { max-height: 150px; border: 1px solid #999; }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        @media(max-width: 600px) { .options-grid { grid-template-columns: 1fr; } }

        button.opt-btn {
            padding: 15px;
            border: 2px solid #e0e0e0;
            background: var(--white);
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: 0.2s;
        }
        button.opt-btn:hover:not(:disabled) { border-color: var(--navy-blue); background: #f0f4ff; }
        button.opt-btn:disabled { opacity: 0.7; cursor: default; }

        .feedback-box { margin-top: 15px; padding: 15px; border-radius: 4px; display: none; text-align: center; }
        .btn-next { background: var(--navy-blue); color: white; border: none; padding: 12px 30px; border-radius: 30px; margin: 15px auto 0 auto; cursor: pointer; display: block; font-weight: bold; }

        /* TRADUCTION */
        .translation-zone { background: #eef2f5; padding: 20px; border-radius: 8px; margin-top: 30px; }
        .nato-input { width: 100%; padding: 12px; font-size: 1.1rem; border: 2px solid #ccc; border-radius: 4px; margin-bottom: 15px; box-sizing: border-box; }
        .nato-output { background: #1a2f55; padding: 15px; border-radius: 6px; min-height: 60px; display: flex; flex-wrap: wrap; gap: 10px; color: #fff; }
        .nato-item { display: flex; align-items: center; background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px; font-family: monospace; font-weight: bold; }
        .flag-icon-small { height: 25px; margin-right: 8px; border: 1px solid #555; }
    </style>
</head>
<body>

<header>
    <h1>Marine Nationale - Révisions PMM Belfort</h1>
</header>

<nav>
    <button onclick="switchTab('grades')" class="active">Grades</button>
    <button onclick="switchTab('navires')">Navires</button>
    <button onclick="switchTab('nato')">Drapeaux</button>
    <button onclick="switchTab('famas')">FAMAS G2</button>
</nav>

<main>
    <div id="grades" class="section-content active">
        <h2>Connaissance des Grades</h2>
        <div id="quiz-grades" class="quiz-area"></div>
    </div>

    <div id="navires" class="section-content">
        <h2>Types de Navires</h2>
        <div id="quiz-navires" class="quiz-area"></div>
    </div>

    <div id="nato" class="section-content">
        <h2>Code International</h2>
        <div id="quiz-nato" class="quiz-area"></div>
        <div class="translation-zone">
            <h3>Traducteur</h3>
            <input type="text" class="nato-input" placeholder="Tapez un message..." oninput="translateNato(this.value)">
            <div class="nato-output" id="nato-res"></div>
        </div>
    </div>

    <div id="famas" class="section-content">
        <h2>Le FAMAS G2</h2>
        <div id="quiz-famas" class="quiz-area"></div>
    </div>
</main>

<script>
    // ================= BASE DE DONNÉES =================
    
    const db = {
        grades: [
            // --- EQUIPAGES ---
            { img: "images/grade_matelot.jpg", q: "Quel est ce grade ?", options: ["Matelot", "Quartier-Maître de 2ème classe", "Mousse"], a: 0, info: "Pas de galon = Matelot." },
            { img: "images/grade_qm2.jpg", q: "Quel est ce grade ?", options: ["Matelot", "Quartier-Maître de 2ème classe", "Quartier-Maître de 1ère classe"], a: 1, info: "2 chevrons rouges = Quartier-Maître de 2ème classe." },
            { img: "images/grade_qm1.jpg", q: "Quel est ce grade ?", options: ["Quartier-Maître de 2ème classe", "Quartier-Maître de 1ère classe", "Second Maître"], a: 1, info: "1 chevron rouge = Quartier-Maître de 1ère classe." },
            
            // --- ÉLÈVES MAISTRANCIERS ---
            { img: "images/grade_sm_maistrancier.jpg", q: "Quel est ce grade (barré de rouge) ?", options: ["Second Maître Maistrancier", "Second Maître", "Quartier-Maître"], a: 0, info: "Second Maître Maistrancier. Appellation : 'élève maistrancier'." },
            { img: "images/grade_sm_brevete.jpg", q: "Quel est ce grade (barré de bleu) ?", options: ["Second Maître Maistrancier", "Second Maître Breveté Maistrancier", "Maître"], a: 1, info: "Second Maître Breveté Maistrancier. Appellation : 'second maître maistrancier'." },

            // --- OFFICIERS MARINIERS ---
            { img: "images/grade_sm.jpg", q: "Quel est ce grade ?", options: ["Second Maître", "Maître", "Premier Maître"], a: 0, info: "2 chevrons or = Second Maître. (Appellation : 'Maître')." },
            { img: "images/grade_m.jpg", q: "Quel est ce grade ?", options: ["Second Maître", "Maître", "Premier Maître"], a: 1, info: "3 chevrons or = Maître." },
            { img: "images/grade_pm.jpg", q: "Quel est ce grade ?", options: ["Maître", "Premier Maître", "Maître Principal"], a: 1, info: "1 galon or = Premier Maître." },
            { img: "images/grade_mp.jpg", q: "Quel est ce grade ?", options: ["Premier Maître", "Maître Principal", "Major"], a: 1, info: "1 galon or 'sabordé' (avec filet argent) = Maître Principal. (Appellation : 'Cipal')." },
            { img: "images/grade_major.jpg", q: "Quel est ce grade ?", options: ["Maître Principal", "Major", "Aspirant"], a: 1, info: "1 galon or surmonté d'une ancre = Major. (Appellation : 'Major')." },

            // --- OFFICIERS SUBALTERNES ---
            { img: "images/grade_asp.jpg", q: "Quel est ce grade ?", options: ["Aspirant", "Enseigne de Vaisseau de 2ème classe", "Enseigne de Vaisseau de 1ère classe"], a: 0, info: "1 galon or coupé de 3 interruptions = Aspirant. (Appellation : 'Lieutenant')." },
            { img: "images/grade_ev2.jpg", q: "Quel est ce grade ?", options: ["Aspirant", "Enseigne de Vaisseau de 2ème classe", "Enseigne de Vaisseau de 1ère classe"], a: 1, info: "1 galon or = Enseigne de Vaisseau de 2ème classe." },
            { img: "images/grade_ev1.jpg", q: "Quel est ce grade ?", options: ["Enseigne de Vaisseau de 2ème classe", "Enseigne de Vaisseau de 1ère classe", "Lieutenant de Vaisseau"], a: 1, info: "2 galons or = Enseigne de Vaisseau de 1ère classe." },
            { img: "images/grade_lv.jpg", q: "Quel est ce grade ?", options: ["Enseigne de Vaisseau de 1ère classe", "Lieutenant de Vaisseau", "Capitaine de Corvette"], a: 1, info: "3 galons or = Lieutenant de Vaisseau. (Appellation : 'Capitaine')." },

            // --- OFFICIERS SUPÉRIEURS ---
            { img: "images/grade_cc.jpg", q: "Quel est ce grade ?", options: ["Lieutenant de Vaisseau", "Capitaine de Corvette", "Capitaine de Frégate"], a: 1, info: "4 galons panachés (Or et Argent) = Capitaine de Corvette. (Appellation : 'Commandant')." },
            { img: "images/grade_cf.jpg", q: "Quel est ce grade ?", options: ["Capitaine de Corvette", "Capitaine de Frégate", "Capitaine de Vaisseau"], a: 1, info: "5 galons panachés (3 Or, 2 Argent) = Capitaine de Frégate. (Appellation : 'Commandant')." },
            { img: "images/grade_cv.jpg", q: "Quel est ce grade ?", options: ["Capitaine de Frégate", "Capitaine de Vaisseau", "Contre-Amiral"], a: 1, info: "5 galons or = Capitaine de Vaisseau. (Appellation : 'Commandant')." },

            // --- OFFICIERS GÉNÉRAUX ---
            { img: "images/grade_ca.jpg", q: "Quel est ce grade ?", options: ["Capitaine de Vaisseau", "Contre-Amiral", "Vice-Amiral"], a: 1, info: "2 étoiles = Contre-Amiral." },
            { img: "images/grade_va.jpg", q: "Quel est ce grade ?", options: ["Contre-Amiral", "Vice-Amiral", "Vice-Amiral d'Escadre"], a: 1, info: "3 étoiles = Vice-Amiral." },
            { img: "images/grade_vae.jpg", q: "Quel est ce grade ?", options: ["Vice-Amiral", "Vice-Amiral d'Escadre", "Amiral"], a: 1, info: "4 étoiles = Vice-Amiral d'Escadre." },
            { img: "images/grade_amiral.jpg", q: "Quel est ce grade ?", options: ["Vice-Amiral d'Escadre", "Amiral", "Amiral de France"], a: 1, info: "5 étoiles = Amiral." }
        ],

        navires: [
            { img: "images/navire_pa.jpg", q: "Type de bâtiment ?", options: ["Porte-Avions", "Porte-Hélicoptères Amphibie", "Bâtiment Ravitailleur"], a: 0, info: "Porte-Avions (Charles de Gaulle)." },
            { img: "images/navire_fremm.jpg", q: "Type de bâtiment ?", options: ["Frégate de Surveillance", "Frégate Multi-Missions", "Patrouilleur de Haute Mer"], a: 1, info: "Frégate Multi-Missions (FREMM)." },
            { img: "images/navire_fremm_da.jpg", q: "Type de bâtiment ?", options: ["Frégate de Défense Aérienne", "Frégate Type La Fayette", "Patrouilleur"], a: 0, info: "Frégate de Défense Aérienne (FREMM DA / FDA)." },
            { img: "images/navire_fdi.jpg", q: "Type de bâtiment ?", options: ["Frégate de Défense et d'Intervention", "Frégate de Surveillance", "Chasseur de Mines"], a: 0, info: "Frégate de Défense et d'Intervention (FDI)." },
            { img: "images/navire_fs.jpg", q: "Type de bâtiment ?", options: ["Frégate de Surveillance", "Patrouilleur Polaire", "Bâtiment Hydrographique"], a: 0, info: "Frégate de Surveillance (Floréal)." },
            { img: "images/navire_phm.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur de Haute Mer", "Patrouilleur Côtier", "Chasseur de Mines"], a: 0, info: "Patrouilleur de Haute Mer (PHM)." },
            { img: "images/navire_pom.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur Outre-Mer", "Patrouilleur de Service Public", "Bâtiment de Soutien"], a: 0, info: "Patrouilleur Outre-Mer (POM)." },
            { img: "images/navire_pag.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur Antilles Guyane", "Patrouilleur de Haute Mer", "Remorqueur"], a: 0, info: "Patrouilleur Antilles Guyane (PAG)." },
            { img: "images/navire_psp.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur de Service Public", "Bâtiment Base de Plongeurs", "Engin de Débarquement"], a: 0, info: "Patrouilleur de Service Public (PSP)." },
            { img: "images/navire_patrouilleur.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur", "Frégate", "Porte-Avions"], a: 0, info: "Patrouilleur (Divers)." },
            { img: "images/navire_polaire.jpg", q: "Type de bâtiment ?", options: ["Patrouilleur Polaire", "Pétrolier Ravitailleur", "Bâtiment d'Essais"], a: 0, info: "Patrouilleur Polaire (L'Astrolabe)." },
            { img: "images/navire_cmt.jpg", q: "Type de bâtiment ?", options: ["Chasseur de Mines Tripartite", "Patrouilleur", "Remorqueur"], a: 0, info: "Chasseur de Mines Tripartite (CMT)." },
            { img: "images/navire_bbpd.jpg", q: "Type de bâtiment ?", options: ["Bâtiment Base de Plongeurs Démineurs", "Bâtiment Hydrographique", "Frégate"], a: 0, info: "Bâtiment Base de Plongeurs Démineurs (BBPD)." },
            { img: "images/navire_brs.jpg", q: "Type de bâtiment ?", options: ["Bâtiment Remorqueur de Sonar", "Bâtiment Ravitailleur", "Chasseur de Mines"], a: 0, info: "Bâtiment Remorqueur de Sonar (BRS)." },
            { img: "images/navire_begm.jpg", q: "Type de bâtiment ?", options: ["Bâtiment d'Expérimentation de Guerre des Mines", "Bâtiment École", "Patrouilleur"], a: 0, info: "Bâtiment d'Expérimentation de Guerre des Mines (BEGM)." },
            { img: "images/navire_brf.jpg", q: "Type de bâtiment ?", options: ["Bâtiment Ravitailleur de Forces", "Bâtiment de Soutien", "Porte-Hélicoptères"], a: 0, info: "Bâtiment Ravitailleur de Forces (BRF)." },
            { img: "images/navire_bcr.jpg", q: "Type de bâtiment ?", options: ["Bâtiment de Commandement et Ravitaillement", "Frégate", "Patrouilleur"], a: 0, info: "Bâtiment de Commandement et Ravitaillement (BCR)." },
            { img: "images/navire_bsam.jpg", q: "Type de bâtiment ?", options: ["Bâtiment de Soutien et d'Assistance Métropolitain", "Patrouilleur", "Chasseur de Mines"], a: 0, info: "Bâtiment de Soutien et d'Assistance Métropolitain (BSAM)." },
            { img: "images/navire_bsaom.jpg", q: "Type de bâtiment ?", options: ["Bâtiment de Soutien et d'Assistance Outre-Mer", "Frégate de Surveillance", "Patrouilleur"], a: 0, info: "Bâtiment de Soutien et d'Assistance Outre-Mer (BSAOM)." },
            { img: "images/navire_rpc.jpg", q: "Type de bâtiment ?", options: ["Remorqueur Portuaire Côtier", "Patrouilleur", "Engin de Débarquement"], a: 0, info: "Remorqueur Portuaire Côtier (RPC)." },
            { img: "images/navire_bem.jpg", q: "Type de bâtiment ?", options: ["Bâtiment d'Essais et de Mesures", "Bâtiment de Renseignement", "Porte-Avions"], a: 0, info: "Bâtiment d'Essais et de Mesures (BEM)." },
            { img: "images/navire_bre.jpg", q: "Type de bâtiment ?", options: ["Bâtiment de Renseignement Électromagnétique", "Bâtiment Hydrographique", "Frégate"], a: 0, info: "Bâtiment de Renseignement Électromagnétique (BRE)." },
            { img: "images/navire_bho.jpg", q: "Type de bâtiment ?", options: ["Bâtiment Hydrographique et Océanographique", "Patrouilleur Polaire", "Chasseur de Mines"], a: 0, info: "Bâtiment Hydrographique et Océanographique (BHO)." },
            { img: "images/navire_voilier.jpg", q: "Type de bâtiment ?", options: ["Voilier École", "Frégate", "Patrouilleur"], a: 0, info: "Voilier École." },
            { img: "images/navire_erf.jpg", q: "Type de bâtiment ?", options: ["Embarcation Remonte Filets", "Engin de Débarquement", "Remorqueur"], a: 0, info: "Embarcation Remonte Filets (ERF)." },
            { img: "images/navire_eda.jpg", q: "Type de bâtiment ?", options: ["Engin de Débarquement Amphibie", "Patrouilleur", "Remorqueur"], a: 0, info: "Engin de Débarquement Amphibie (EDA)." }
        ],

        nato: [
            { img: "images/flag_a.png", q: "Signification ?", options: ["ALFA", "BRAVO", "ZULU"], a: 0, info: "ALFA (A) - J'ai un scaphandrier en plongée." },
            { img: "images/flag_b.png", q: "Signification ?", options: ["BRAVO", "CHARLIE", "DELTA"], a: 0, info: "BRAVO (B) - Je charge/décharge des matières dangereuses." },
            { img: "images/flag_c.png", q: "Signification ?", options: ["CHARLIE", "ECHO", "FOXTROT"], a: 0, info: "CHARLIE (C) - Affirmation." },
            { img: "images/flag_d.png", q: "Signification ?", options: ["DELTA", "BRAVO", "ALFA"], a: 0, info: "DELTA (D) - Ne me gênez pas, je manœuvre avec difficulté." },
            { img: "images/flag_e.png", q: "Signification ?", options: ["ECHO", "INDIA", "JULIETT"], a: 0, info: "ECHO (E) - Je viens sur tribord." },
            { img: "images/flag_f.png", q: "Signification ?", options: ["FOXTROT", "GOLF", "HOTEL"], a: 0, info: "FOXTROT (F) - Je suis désemparé." },
            { img: "images/flag_g.png", q: "Signification ?", options: ["GOLF", "LIMA", "MIKE"], a: 0, info: "GOLF (G) - J'ai besoin d'un pilote." },
            { img: "images/flag_h.png", q: "Signification ?", options: ["HOTEL", "INDIA", "KILO"], a: 0, info: "HOTEL (H) - J'ai un pilote à bord." },
            { img: "images/flag_i.png", q: "Signification ?", options: ["INDIA", "JULIETT", "OSCAR"], a: 0, info: "INDIA (I) - Je viens sur bâbord." },
            { img: "images/flag_j.png", q: "Signification ?", options: ["JULIETT", "KILO", "LIMA"], a: 0, info: "JULIETT (J) - Incendie à bord." },
            { img: "images/flag_k.png", q: "Signification ?", options: ["KILO", "MIKE", "NOVEMBER"], a: 0, info: "KILO (K) - Je désire communiquer." },
            { img: "images/flag_l.png", q: "Signification ?", options: ["LIMA", "PAPA", "QUEBEC"], a: 0, info: "LIMA (L) - Stoppez votre navire." },
            { img: "images/flag_m.png", q: "Signification ?", options: ["MIKE", "NOVEMBER", "OSCAR"], a: 0, info: "MIKE (M) - Mon navire est stoppé." },
            { img: "images/flag_n.png", q: "Signification ?", options: ["NOVEMBER", "CHARLIE", "SIERRA"], a: 0, info: "NOVEMBER (N) - Négatif." },
            { img: "images/flag_o.png", q: "Signification ?", options: ["OSCAR", "PAPA", "ROMEO"], a: 0, info: "OSCAR (O) - Homme à la mer." },
            { img: "images/flag_p.png", q: "Signification ?", options: ["PAPA", "QUEBEC", "ROMEO"], a: 0, info: "PAPA (P) - Rappel des équipages / Filets accrochés." },
            { img: "images/flag_q.png", q: "Signification ?", options: ["QUEBEC", "SIERRA", "TANGO"], a: 0, info: "QUEBEC (Q) - Demande libre pratique." },
            { img: "images/flag_r.png", q: "Signification ?", options: ["ROMEO", "UNIFORM", "VICTOR"], a: 0, info: "ROMEO (R) - Pas de signification particulière isolée." },
            { img: "images/flag_s.png", q: "Signification ?", options: ["SIERRA", "TANGO", "UNIFORM"], a: 0, info: "SIERRA (S) - Je bats en arrière." },
            { img: "images/flag_t.png", q: "Signification ?", options: ["TANGO", "VICTOR", "WHISKEY"], a: 0, info: "TANGO (T) - Chalutage en cours." },
            { img: "images/flag_u.png", q: "Signification ?", options: ["UNIFORM", "WHISKEY", "X-RAY"], a: 0, info: "UNIFORM (U) - Vous courez vers un danger." },
            { img: "images/flag_v.png", q: "Signification ?", options: ["VICTOR", "X-RAY", "YANKEE"], a: 0, info: "VICTOR (V) - Je demande assistance." },
            { img: "images/flag_w.png", q: "Signification ?", options: ["WHISKEY", "YANKEE", "ZULU"], a: 0, info: "WHISKEY (W) - Assistance médicale." },
            { img: "images/flag_x.png", q: "Signification ?", options: ["X-RAY", "ZULU", "ALFA"], a: 0, info: "X-RAY (X) - Veillez mes signaux." },
            { img: "images/flag_y.png", q: "Signification ?", options: ["YANKEE", "ALFA", "BRAVO"], a: 0, info: "YANKEE (Y) - Je chasse sur mon ancre." },
            { img: "images/flag_z.png", q: "Signification ?", options: ["ZULU", "KILO", "MIKE"], a: 0, info: "ZULU (Z) - J'ai besoin d'un remorqueur." }
        ],

        famas: [
            // --- PIÈCES EXISTANTES ---
            { img: "images/famas_ensemble_mobile.jpg", q: "Quelle est cette pièce centrale ?", options: ["L'ensemble mobile", "La culasse", "Le percuteur"], a: 0, info: "L'ensemble mobile (qui contient la culasse, le percuteur, la masse additionnelle...)." },
            { img: "images/famas_chargeur.jpg", q: "Quelle est la contenance de ce chargeur (G2) ?", options: ["30 cartouches", "25 cartouches", "20 cartouches"], a: 0, info: "30 cartouches pour le FAMAS G2 (standard OTAN)" },
            { img: "images/famas_selecteur.jpg", q: "Que signifie la position '1' sur le sélecteur ?", options: ["Coup par coup (Semi-auto)", "Rafale", "Sûreté"], a: 0, info: "1 = Tir en coup par coup" },

            // --- NOUVELLES IMAGES (A RAJOUTER) ---
            { img: "images/famas_general.jpg", q: "Quel est le modèle de cette arme ?", options: ["FAMAS G2", "FAMAS F1", "HK 416"], a: 0, info: "C'est le FAMAS G2 (reconnaissable à son grand pontet et son chargeur courbé type M16)." },
            
            { img: "images/famas_boitier.jpg", q: "Comment s'appelle cette pièce ?", options: ["Boîtier de mécanisme", "Ensemble mobile", "Poignée garde-main"], a: 0, info: "Le Boîtier de Mécanisme. C'est la PIÈCE DE SÉCURITÉ de l'arme" },
            
            { img: "images/famas_limiteur.jpg", q: "C'est le boîtier de mécanisme. À quoi sert la commande '0' ou '3' ?", options: ["Limiteur de rafale", "Sélecteur de tir", "Sûreté"], a: 0, info: "C'est le Limiteur de Rafale (sous la crosse). 0 = Rafale libre, 3 = Rafale de 3 coups." },
            
            { img: "images/famas_poignee.jpg", q: "Identifiez cet ensemble :", options: ["Poignée Garde-Main (PGM)", "Crosse", "Canon"], a: 0, info: "La Poignée Garde-Main. Elle porte le bipied et les alidades de visée." },
            
            { img: "images/famas_crosse.jpg", q: "Sur la crosse, la pièce mobile permettant de viser s'appelle :", options: ["L'appui-joue", "L'amortisseur", "La fenêtre d'éjection"], a: 0, info: "L'appui-joue. Il est réversible (pour tireur droitier ou gaucher)." },

            // --- QUESTIONS SANS IMAGE (CONNAISSANCES PURES DU PDF) ---
            { q: "Quelle est la portée pratique du FAMAS G2 ?", options: ["300 m", "200 m", "600 m"], a: 0, info: "300 mètres (pour une portée maximale de 2500m)" },
            { q: "Quelle est la cadence de tir théorique ?", options: ["1000 coups/mn", "600 coups/mn", "100 coups/mn"], a: 0, info: "1000 coups/minute (c'est très rapide !)" },
            { q: "Le FAMAS G2 est conçu pour tirer des grenades...", options: ["Mixtes (Anti-Personnel / Anti-Véhicule)", "Uniquement fumigènes", "De 120mm"], a: 0, info: "Il tire des grenades mixtes (AP/AV 40mm) ou antichar (58mm)" }
        ]
    };

    const natoAlphabet = {
        'A': 'flag_a.png', 'B': 'flag_b.png', 'C': 'flag_c.png', 'D': 'flag_d.png', 'E': 'flag_e.png', 
        'F': 'flag_f.png', 'G': 'flag_g.png', 'H': 'flag_h.png', 'I': 'flag_i.png', 'J': 'flag_j.png', 
        'K': 'flag_k.png', 'L': 'flag_l.png', 'M': 'flag_m.png', 'N': 'flag_n.png', 'O': 'flag_o.png', 
        'P': 'flag_p.png', 'Q': 'flag_q.png', 'R': 'flag_r.png', 'S': 'flag_s.png', 'T': 'flag_t.png', 
        'U': 'flag_u.png', 'V': 'flag_v.png', 'W': 'flag_w.png', 'X': 'flag_x.png', 'Y': 'flag_y.png', 
        'Z': 'flag_z.png'
    };
    const natoNames = {
        'A': 'ALFA', 'B': 'BRAVO', 'C': 'CHARLIE', 'D': 'DELTA', 'E': 'ECHO', 'F': 'FOXTROT',
        'G': 'GOLF', 'H': 'HOTEL', 'I': 'INDIA', 'J': 'JULIETT', 'K': 'KILO', 'L': 'LIMA',
        'M': 'MIKE', 'N': 'NOVEMBER', 'O': 'OSCAR', 'P': 'PAPA', 'Q': 'QUEBEC', 'R': 'ROMEO',
        'S': 'SIERRA', 'T': 'TANGO', 'U': 'UNIFORM', 'V': 'VICTOR', 'W': 'WHISKEY', 'X': 'X-RAY',
        'Y': 'YANKEE', 'Z': 'ZULU'
    };

    // ================= MOTEUR =================
    
    function switchTab(id) {
        document.querySelectorAll('.section-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('nav button').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.target.classList.add('active');
        
        if(db[id]) {
            loadQuestion(id);
        } else if (id === 'nato') {
            loadQuestion('nato');
        }
    }

    function loadQuestion(cat) {
        const container = document.getElementById(`quiz-${cat}`);
        const qData = db[cat][Math.floor(Math.random() * db[cat].length)];
        
        // Préparer les options (texte + indicateur si correct)
        let options = qData.options.map((opt, index) => {
            return {
                text: opt,
                isCorrect: (index === qData.a)
            };
        });

        // SHUFFLE : Mélange aléatoire des options
        options = options.sort(() => Math.random() - 0.5);

        let imgClass = "quiz-image";
        if(cat === 'nato') imgClass += " flag-quiz-img";
        let imageHTML = qData.img ? `<img src="${qData.img}" class="${imgClass}" alt="Image">` : '';

        container.innerHTML = `
            <div class="question-card">
                ${imageHTML}
                <div class="question-text">${qData.q}</div>
                <div class="options-grid">
                    ${options.map((opt) => 
                        `<button class="opt-btn" onclick="check(this, ${opt.isCorrect}, '${qData.info.replace(/'/g, "\\'")}')">${opt.text}</button>`
                    ).join('')}
                </div>
                <div class="feedback-box"></div>
                <button class="btn-next" style="display:none" onclick="loadQuestion('${cat}')">Suivant →</button>
            </div>
        `;
    }

    function check(btn, isCorrect, info) {
        const card = btn.closest('.question-card');
        const feedback = card.querySelector('.feedback-box');
        card.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);

        if(isCorrect) {
            btn.style.background = "#d4edda"; 
            btn.style.borderColor = "#28a745";
            feedback.innerHTML = `<strong style="color:#155724">Exact !</strong><br>${info}`;
            feedback.style.background = "#d4edda";
        } else {
            btn.style.background = "#f8d7da"; 
            btn.style.borderColor = "#dc3545";
            feedback.innerHTML = `<strong style="color:#721c24">Faux.</strong><br>${info}`;
            feedback.style.background = "#f8d7da";
        }
        feedback.style.display = 'block';
        card.querySelector('.btn-next').style.display = 'block';
    }

    function translateNato(text) {
        const output = document.getElementById('nato-res');
        if(!text.trim()) { output.innerHTML = ""; return; }
        
        output.innerHTML = text.toUpperCase().split('').map(char => {
            if (natoAlphabet[char]) {
                const img = `<img src="images/${natoAlphabet[char]}" class="flag-icon-small">`;
                return `<div class="nato-item">${img} ${natoNames[char]}</div>`;
            } else if (char.match(/[0-9]/)) {
                 return `<div class="nato-item">${char}</div>`;
            }
            return char === ' ' ? '<div style="width:100%"></div>' : '';
        }).join('');
    }

    loadQuestion('grades');
</script>

</body>
</html>



